<section id="portfolio" class="scroll-mt-[72px] w-full bg-[oklch(28%_0.146_265.522)] font-cinzel">
  <div class="max-w-6xl mx-auto pt-8 pb-20">

    <!-- TITULO + LAUREL -->
    <div class="text-center">
      <h2 class="text-5xl md:text-6xl font-romano text-ocre tracking-[0.08em]">
        Portfolio
      </h2>
      <img src="/assets/laurel.webp"
           alt="ornamento de laurel"
           class="mx-auto w-[300px] opacity-95 -mt-16 translate-x-[8px]" />
    </div>

    <!-- GALERÍA -->
    <div class="mt-12 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <ng-container *ngFor="let img of images; let i = index">
        <!-- aplicamos aspect-[2/3] al contenedor -->
        <div class="overflow-hidden rounded-lg border border-ocre/40 shadow-lg aspect-[2/3] box-border">
          <button type="button"
                  class="w-full h-full p-0 bg-transparent block"
                  (click)="open(i)"
                  [attr.aria-label]="'Abrir imagen ' + (i + 1)">
            <img [src]="img.src"
                [alt]="img.alt"
                class="w-full h-full object-cover block transition-transform duration-500 hover:scale-105 select-none"
                loading="lazy"
                decoding="async" />
          </button>
        </div>
      </ng-container>
    </div>

    <!-- SECCIÓN DE MÁS TRABAJOS -->
<div class="mt-16">
  <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
    <ng-container *ngFor="let img of extraImages; let i = index">
      <div class="overflow-hidden rounded-md border border-ocre/20 shadow-md aspect-square box-border">
        <button type="button"
                class="w-full h-full p-0 bg-transparent block"
                (click)="openExtra(i)"
                [attr.aria-label]="'Abrir imagen ' + (i + 1)">
          <img [src]="img.src"
               [alt]="img.alt"
               class="w-full h-full object-cover block transition-transform duration-500 hover:scale-105 select-none" />
        </button>
      </div>
    </ng-container>
  </div>
</div>

  </div>

  <!-- LIGHTBOX / MODAL -->
<div
  class="bg-black/60 fixed inset-0 z-50 flex items-center justify-center p-6"
  *ngIf="lightboxOpen"
  (click)="onBackdropClick($event)"
  role="dialog"
  aria-modal="true"
  aria-label="Visor de imágenes">

  <!-- Fondo del modal: mismo azul marino principal de la página -->

  <div class="mt-auto relative w-full max-w-[1100px] mx-auto z-10" (click)="$event.stopPropagation()">
    <!-- Close -->
    <button
      (click)="close()"
      class="absolute right-4 top-4 z-30 p-3 rounded-md shadow-lg bg-ocre text-[oklch(28%_0.146_265.522)] hover:brightness-95 ring-2 ring-[rgba(0,0,0,0.08)]"
      aria-label="Cerrar galería">
      ✕
    </button>

    <!-- Image container -->
    <div class="bg-blue-900/90 pt-6 rounded-2xl overflow-hidden shadow-2xl relative border border-ocre/20">
      <img
        [src]="currentImage.src"
        [alt]="currentImage.alt"
        class="w-full max-h-[80vh] object-contain bg-transparent select-none" />

      <div class="p-4 text-sm text-ocre/90">{{ currentImage.caption }}</div>

      <!-- Prev / Next dentro del modal, visibles y con estilo (fondo ocre, texto azul) -->
      <button
        *ngIf="hasPrev()"
        (click)="prev()"
        class="absolute left-4 top-1/2 -translate-y-1/2 z-20 flex items-center justify-center rounded-full p-3 shadow-lg bg-ocre text-[oklch(28%_0.146_265.522)] ring-2 ring-[rgba(0,0,0,0.06)] focus:outline-none hover:brightness-95"
        aria-label="Anterior">
        ‹
      </button>

      <button
        *ngIf="hasNext()"
        (click)="next()"
        class="absolute right-4 top-1/2 -translate-y-1/2 z-20 flex items-center justify-center rounded-full p-3 shadow-lg bg-ocre text-[oklch(28%_0.146_265.522)] ring-2 ring-[rgba(0,0,0,0.06)] focus:outline-none hover:brightness-95"
        aria-label="Siguiente">
        ›
      </button>
    </div>
  </div>
  </div>
</section>